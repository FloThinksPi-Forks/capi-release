#!/usr/bin/env bash

# this script is ran by the route-registrar

PORT=<%= p("cc.public_tls.port") %>
URL="https://localhost:${PORT}/healthz"

curl \
  --max-time <%= p('cc.api_health_check_timeout_per_retry') %> \
  --retry-max-time <%= p('cc.api_health_check_total_timeout') %> \
  --retry 100000 \
  --retry-delay 1 \
  -k \
  "${URL}"

